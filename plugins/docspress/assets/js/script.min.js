!function(e){function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n,t){e.exports=t(1)},function(e,n){function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),r=window.jQuery,s=function(){function e(){t(this,e);var n=this;n.cache={},n.pendingAjax=!1,n.xhrAjaxSearch=!1,n.$body=r("body"),n.$window=r(window),n.$document=r(document),n.$preloader=r('<div class="docspress-preloader"><span><span></span></span></div>'),n.$singleAjax=r(".docspress-single-ajax"),n.initSearch(),n.initAnchors(),n.initFeedbacks(),n.initAjax()}return o(e,[{key:"stripHash",value:function(e){return e.replace(/#.*/,"")}},{key:"initSearch",value:function(){var e=this,n=!1;e.$document.on("submit",".docspress-search-form",function(n){n.preventDefault(),e.prepareSearchResults(r(this))}),e.$document.on("input",".docspress-search-form",function(t){var o=this;t.preventDefault(),clearTimeout(n),n=setTimeout(function(){e.prepareSearchResults(r(o))},500)})}},{key:"prepareSearchResults",value:function(e){var n=this;if(n.xhrAjaxSearch&&n.xhrAjaxSearch.abort(),!e.find(".docspress-search-field").val())return void e.next(".docspress-search-form-result").html("");n.xhrAjaxSearch=r.ajax({type:"GET",url:e.attr("action"),data:e.serialize(),success:function(t){var o=r(t),s=o.find(".docspress-search-list").get(0).outerHTML;e.next(".docspress-search-form-result").html(s),n.xhrAjaxSearch=!1},error:function(e){console.log(e),n.xhrAjaxSearch=!1}})}},{key:"initAnchors",value:function(){var e=!!window.AnchorJS&&new window.AnchorJS;e&&(e.options={placement:"left",visible:"hover",icon:"#"},e.add(".docspress-single-content .entry-content h2, .docspress-single-content .entry-content h3, .docspress-single-content .entry-content h4"))}},{key:"initFeedbacks",value:function(){var e=this;e.$body.on("click",".docspress-single-feedback a",function(n){e.onFeedbackClick(n,r(this))})}},{key:"initAjax",value:function(){var e=this;e.$singleAjax.length&&(e.setCache(window.location.href,{href:window.location.href,title:document.title,doc:e.$singleAjax.html(),html:document.documentElement.outerHTML}),e.$singleAjax.on("click",".docspress-nav-list a, .docspress-single-breadcrumbs a, .docspress-single-articles a, .docspress-single-adjacent-nav a, .docspress-search-form-result a",function(n){e.onDocLinksClick(n)}),e.$window.on("popstate",function(n){e.renderDoc(n.target.location.href)}))}},{key:"onFeedbackClick",value:function(e,n){e.preventDefault();var t=this;if(!t.pendingAjax){t.pendingAjax=!0;var o=n.closest(".docspress-single-feedback").addClass("docspress-single-feedback-loading"),s={post_id:n.data("id"),type:n.data("type"),action:"docspress_ajax_feedback",_wpnonce:docspress_vars.nonce};o.append(t.$preloader.clone()),r.post(docspress_vars.ajaxurl,s,function(e){o.html("<div>"+e.data+"</div>").removeClass("docspress-single-feedback-loading"),t.pendingAjax=!1})}}},{key:"setCache",value:function(e,n){e=e||!1,n=n||!1,e&&n&&!this.cache[e]&&(this.cache[e]=n)}},{key:"getCache",value:function(e){return!(!(e=e||!1)||!this.cache[e])&&this.cache[e]}},{key:"renderDoc",value:function(e){var n=this.getCache(e);this.$singleAjax.html(n.doc),r("title").text(n.title),r(".wp-admin-bar-edit .ab-item").attr("href",e);var t=r(".docspress-single")[0].getBoundingClientRect().top;t<0&&this.$document.scrollTop(this.$document.scrollTop()+t),this.$document.trigger("docspress_ajax_loaded",n)}},{key:"onDocLinksClick",value:function(e){var n=e.currentTarget;e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||window.location.protocol===n.protocol&&window.location.hostname===n.hostname&&(n.href.indexOf("#")>-1&&this.stripHash(n.href)===this.stripHash(window.location.href)||"file:"!==window.location.protocol&&(e.isDefaultPrevented()||(e.preventDefault(),this.loadDocPage(n.href))))}},{key:"loadDocPage",value:function(e){var n=this;if((e=e||!1)&&n.stripHash(e)!==n.stripHash(window.location.href)){var t=n.getCache(e);if(t)return n.renderDoc(e),void window.history.pushState(null,t.title,e);n.xhr&&n.xhr.abort&&(n.xhr.abort(),n.xhr={});var o=n.$singleAjax.addClass("docspress-single-ajax-loading");o.find(".docspress-single-content").append(n.$preloader.clone()),n.xhr=r.ajax({url:e,success:function(t){if(!t)return void(window.location=e);var s=r("<div>").html(t),a=s.find("title:eq(0)").text()||document.title,i=s.find(".docspress-single-ajax").html();if(!i)return void(window.location=e);n.setCache(e,{href:e,title:a,doc:i,html:t}),n.renderDoc(e),window.history.pushState(null,a,e),s.remove(),s=null,o.removeClass("docspress-single-ajax-loading")},error:function(n){0!==n.status?console.log("error",n):window.location=e,o.removeClass("docspress-single-ajax-loading")}})}}}]),e}();r(function(){new s})}]);